/* Estilos base */
:root {
  --bg-1: #1a0b2e;
  --bg-2: #2e0b2b;
  --fg: #fff6ff;
  --accent: #ff2bd6;
  --accent-2: #38e8ff;
  --accent-3: #ffd166;
  --success: #40e39b;
  --danger: #ff6b6b;
}

* { box-sizing: border-box; }
html, body { height: 100%; }
body {
  margin: 0;
  font-family: 'Poppins', system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
  color: var(--fg);
  background: radial-gradient(circle at 20% 20%, var(--bg-2), var(--bg-1));
}

.title { font-weight: 800; letter-spacing: 0.5px; margin: 0 0 0.5rem; font-size: 3.5rem; }
.subtitle { margin: 0.25rem 0 1rem; opacity: 0.9; }

.screen { min-height: 100vh; padding: 24px; }
.screen--center { display: grid; place-items: center; }
.screen--fullscreen { height: 100vh; padding: 0; overflow: hidden; }

.colorful-circus {
  background:
    radial-gradient(circle at 15% 20%, #ff7eb6 0 12%, transparent 13%),
    radial-gradient(circle at 80% 30%, #ffd166 0 12%, transparent 13%),
    radial-gradient(circle at 30% 80%, #7effa1 0 12%, transparent 13%),
    radial-gradient(circle at 70% 75%, #6ea8ff 0 12%, transparent 13%),
    linear-gradient(135deg, #2e0b2b, #0b1f3a 70%);
}

.psychedelic {
  background: conic-gradient(from 180deg at 50% 50%, #2e0b2b, #0b1f3a, #40116d, #2e0b2b);
  animation: hue 12s linear infinite;
}
@keyframes hue { to { filter: hue-rotate(360deg); } }

.loading-wrapper { width: min(680px, 92vw); text-align: center; }
.progress { width: 100%; height: 14px; border-radius: 999px; background: #ffffff22; overflow: hidden; box-shadow: inset 0 0 0 2px #ffffff33; }
.progress__bar { height: 100%; width: 0%; background: linear-gradient(90deg, var(--accent), var(--accent-2)); transition: width 140ms ease; }
.dots span { font-size: 28px; animation: blink 1.2s infinite; display: inline-block; }
.dots span:nth-child(2) { animation-delay: .2s; }
.dots span:nth-child(3) { animation-delay: .4s; }
@keyframes blink { 50% { opacity: .2; } }

.header { text-align: center; margin-bottom: 16px; }

.lobby-grid {
  display: grid;
  gap: 20px;
  grid-template-columns: repeat(auto-fit, minmax(220px, 1fr));
  max-width: 1000px;
  margin: 0 auto;
}
.card {
  background: #ffffff14;
  border: 2px solid #ffffff33;
  color: var(--fg);
  padding: 24px;
  border-radius: 16px;
  text-align: left;
  cursor: pointer;
  backdrop-filter: blur(4px);
  transition: transform .15s ease, background .2s ease;
}
.card:hover { transform: translateY(-3px); background: #ffffff22; }
.card h2 { margin: 0 0 8px; }
.card p { margin: 0; opacity: .9; }

.panel { max-width: 1000px; margin: 0 auto; }
.panel__title { margin: 0 0 12px; text-align: center; }

.toolbar { display: flex; justify-content: flex-start; margin-bottom: 12px; }
.btn-back { background: #ffffff18; border: 2px solid #ffffff44; color: var(--fg); border-radius: 999px; padding: 8px 14px; cursor: pointer; }
.btn-back:hover { background: #ffffff2b; }
.btn-primary { background: linear-gradient(90deg, var(--accent), var(--accent-2)); border: 0; color: #0b0b11; padding: 10px 16px; border-radius: 10px; cursor: pointer; font-weight: 700; }
.btn-primary:hover { filter: brightness(1.05); }

/* Botón de start principal más grande */
.btn-primary--start { 
  padding: 20px 40px; 
  font-size: 1.5rem; 
  border-radius: 16px; 
  min-width: 200px;
  text-align: center;
  display: block;
  margin: 30px auto 0;
  box-shadow: 0 8px 25px rgba(255, 43, 214, 0.3);
  transition: all 0.3s ease;
}
.btn-primary--start:hover { 
  transform: translateY(-2px); 
  box-shadow: 0 12px 35px rgba(255, 43, 214, 0.4);
}

.characters { display: grid; grid-template-columns: repeat(auto-fit, minmax(120px, 1fr)); gap: 16px; }
.sprite { width: 96px; height: 96px; border-radius: 50%; margin: 12px auto; border: 3px solid #ffffff55; box-shadow: 0 8px 20px #00000044, inset 0 0 12px #ffffff22; }
.sprite--jax { background: radial-gradient(circle at 35% 35%, #ffd166, #ff7b00); }
.sprite--pomni { background: radial-gradient(circle at 35% 35%, #c77dff, #7209b7); }
.sprite--kaufmo { background: radial-gradient(circle at 35% 35%, #7effa1, #00c853); }
.sprite--ragatha { background: radial-gradient(circle at 35% 35%, #6ea8ff, #005bb5); }

.story { display: grid; grid-template-columns: 1fr 2fr; gap: 16px; align-items: center; }
.psychedelic-frame { height: 180px; border-radius: 16px; background: repeating-conic-gradient(#ff2bd6 0 10deg, #38e8ff 10deg 20deg, #ffd166 20deg 30deg, #7effa1 30deg 40deg); filter: hue-rotate(25deg); }
.story p { margin: 0; line-height: 1.6; }

.minigame-list { display: grid; grid-template-columns: repeat(auto-fit, minmax(260px, 1fr)); gap: 16px; }
.minigame-card { background: #ffffff14; border: 2px solid #ffffff33; border-radius: 16px; padding: 16px; }
.minigame-card h3 { margin: 8px 0; }
.minigame-card__desc { margin: 0 0 12px; opacity: .9; }

/* Jax game */
.game .hud { display: flex; justify-content: space-between; max-width: 1000px; margin: 0 auto 12px; padding: 10px 14px; background: #ffffff14; border: 2px solid #ffffff22; border-radius: 12px; }
.jax-board { 
  position: relative; 
  max-width: 1000px; 
  height: clamp(600px, 85vh, 1000px); 
  margin: 0 auto; 
  background: url('../images/imm.png') center/cover no-repeat;
  border: 2px solid #ffffff22; 
  border-radius: 16px; 
  overflow: hidden; 
}
.hole { 
  position: absolute; 
  width: 100px; 
  height: 100px; 
  background: rgba(0, 0, 0, 0.3); 
  border: 2px solid #ffffff44; 
  border-radius: 50%; 
  transform: translate(-50%, -50%);
  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.2);
}
/* Agujeros alineados exactamente con los 6 círculos negros de la imagen */
.hole[data-idx="0"] { left: 32%; top: 45%; }  /* Top-Left: bajado mucho más y movido a la derecha */
.hole[data-idx="1"] { left: 47%; top: 57.5%; }  /* Upper-Center-Left: movido al centro y más a la derecha */
.hole[data-idx="2"] { left: 66%; top: 45%; }  /* Upper-Center-Right: bajado mucho más */
.hole[data-idx="3"] { left: 20%; top: 70%; }  /* Mid-Left: bajado mucho más y movido más a la izquierda */
.hole[data-idx="4"] { left: 66%; top: 70%; }  /* Mid-Right: bajado mucho más */
.hole[data-idx="5"] { left: 40%; top: 90%; }  /* Lower-Center-Left: bajado mucho más y movido más a la derecha */
.jax { 
  position: absolute; 
  width: 70px; 
  height: 70px; 
  border-radius: 50%; 
  background: radial-gradient(circle at 35% 35%, #ffd166, #ff7b00); 
  border: 4px solid #ffffff; 
  box-shadow: 0 8px 20px rgba(0, 0, 0, 0.7), 0 0 20px rgba(255, 209, 102, 0.5); 
  transform: translate(-50%, -50%); 
  cursor: pointer; 
  transition: transform .08s ease; 
}
.jax:active { transform: translate(-50%, -50%) scale(.95); }

.result { margin: 12px auto; max-width: 1000px; text-align: center; padding: 12px 16px; border-radius: 12px; background: #ffffff14; border: 2px solid #ffffff22; }
.result__row { display: flex; gap: 16px; align-items: center; justify-content: center; }
.result__text { font-size: 18px; }
.sprite--lg { width: 120px; height: 120px; }

/* Pomni game */
.pomni-area { 
  position: relative; 
  max-width: 1000px; 
  height: clamp(600px, 85vh, 1000px); 
  margin: 0 auto; 
  background: url('../images/imk.png') center/cover no-repeat;
  border: 2px solid #ffffff22; 
  border-radius: 16px; 
  overflow: hidden;
}
.pomni { position: absolute; left: 18%; top: 48%; width: 150px; height: 150px; border-radius: 50%; background: radial-gradient(circle at 35% 35%, #c77dff, #7209b7); border: 4px solid #ffffff88; box-shadow: 0 8px 22px #00000066; transform: translate(-50%, -50%); }
.food { position: absolute; right: 20%; top: 60%; width: 50px; height: 50px; border-radius: 10px; background: radial-gradient(circle at 35% 35%, #7effa1, #00c853); border: 3px solid #ffffff88; box-shadow: 0 6px 16px #00000066; transform: translate(50%, -50%); cursor: grab; }
.food:active { cursor: grabbing; }
.hint { 
  text-align: center; 
  opacity: .9; 
  background: rgba(0, 0, 0, 0.7);
  color: white;
  padding: 8px 16px;
  border-radius: 8px;
  margin: 12px auto;
  max-width: 600px;
  font-weight: 600;
}

@media (max-width: 720px) {
  .story { grid-template-columns: 1fr; }
  .title { font-size: 2.5rem; }
  .btn-primary--start { 
    padding: 16px 32px; 
    font-size: 1.25rem; 
    min-width: 180px;
  }
}

/* Overlay menú rápido */
.overlay { position: fixed; inset: 0; display: grid; place-items: center; background: #00000080; }
.overlay__panel { background: #14121f; border: 2px solid #ffffff33; border-radius: 16px; padding: 18px; width: min(520px, 92vw); }
.overlay__grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(140px, 1fr)); gap: 12px; margin-top: 8px; }



